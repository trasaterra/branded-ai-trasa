const originalContent=document.querySelector(".content-wrapper").innerHTML;function initializePromptLinks(){document.querySelectorAll(".prompt-link").forEach((function(e){e.addEventListener("mouseover",(function(){e.classList.add("spin-animation")})),e.addEventListener("animationend",(function(){e.classList.remove("spin-animation")})),e.addEventListener("click",(function(n){n.preventDefault(),handleSubmit(e.textContent.trim())}))})),preventWidows(".prompt-link")}function preventWidows(e){document.querySelectorAll(e).forEach((e=>{const n=e.innerHTML.split(" ");n.length>1&&(n[n.length-2]+="&nbsp;"+n.pop(),e.innerHTML=n.join(" "))}))}function replaceContentWithCarousel(e){document.querySelector(".content-wrapper").innerHTML='\n    <div class="answer-bg"></div>\n    \n    <div class="answer-window">\n      \n      <div id="answerCarousel" class="carousel slide" data-bs-ride="false">\n        \x3c!-- Carousel indicators --\x3e\n        <div class="carousel-indicators"></div>\n        <div class="carousel-inner">\n          \x3c!-- Slides will be dynamically added here --\x3e\n        </div>\n        \x3c!-- Carousel controls --\x3e\n        <button class="carousel-control-prev" type="button" data-bs-target="#answerCarousel" data-bs-slide="prev">\n          <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n          <span class="visually-hidden">Previous</span>\n        </button>\n        <button class="carousel-control-next" type="button" data-bs-target="#answerCarousel" data-bs-slide="next">\n          <span class="carousel-control-next-icon" aria-hidden="true"></span>\n          <span class="visually-hidden">Next</span>\n        </button>\n      </div>\n    </div>\n\n    <div class="logo-wrapper answer-logo-wrapper">\n        <a href="http://trasaterra.com" target="_blank">\n          <img class="trasaterra-logo" src="img/trasaterra-small-logomark-white.svg" alt="Trasaterra">\n          \n        </a>\n    </div>\n  ',populateCarousel(e),setRandomBackground()}function handleSubmit(e){const n=e||document.getElementById("text-input").value.trim();if(!n)return;replaceContentWithCarousel([`Response for: “${n}”. This demonstrates using the same carousel for both input and prompt link clicks.`,"This is the second example answer to show how the carousel can handle multiple slides.","Here is the third example answer, ensuring consistency in the carousel display for prototyping."])}function handleSubmit(e){const n=e||document.getElementById("text-input").value.trim();if(!n)return;replaceContentWithCarousel(n.split(/(?<=[.!?])\s+/).map((e=>e.trim())).filter((e=>e.length>0)).map((e=>`This is the answer to the question: “${e}”`)))}document.querySelector(".upload-btn").addEventListener("click",(()=>handleSubmit()));const textarea=document.getElementById("text-input");function populateCarousel(e){const n=document.querySelector("#answerCarousel .carousel-inner"),t=document.querySelector(".carousel-indicators"),a=document.querySelector(".carousel-control-prev"),o=document.querySelector(".carousel-control-next");if(n.innerHTML="",t.innerHTML="",!e.length)return void console.warn("No answers provided to populate the carousel.");e.forEach(((e,a)=>{const o=document.createElement("div");o.className="carousel-item"+(0===a?" active":"");const r=document.createElement("div");r.className="d-block w-100 p-4",r.innerHTML=`\n      <div class="parent-container">\n        <div class="container answer-vertical">\n          <p>${e}</p>\n        </div>\n      </div>`,o.appendChild(r),n.appendChild(o);const s=document.createElement("button");s.type="button",s.setAttribute("data-bs-target","#answerCarousel"),s.setAttribute("data-bs-slide-to",a),s.setAttribute("aria-label",`Slide ${a+1}`),s.innerHTML=`<span class="indicator-number">${a+1}</span>`,0===a&&(s.classList.add("active"),s.setAttribute("aria-current","true")),t.appendChild(s)}));const r=e.length>1;a.style.display=r?"block":"none",o.style.display=r?"block":"none",t.style.display=r?"block":"none"}function setRandomBackground(){const e=["/img/backgrounds/background-1.jpg","/img/backgrounds/background-2.jpg","/img/backgrounds/background-3.jpg","/img/backgrounds/background-4.jpg","/img/backgrounds/background-5.jpg","/img/backgrounds/background-6.jpg"],n=document.querySelector(".answer-window");if(!n)return void console.error("The .answer-window element was not found.");const t=e[Math.floor(Math.random()*e.length)];console.log("Randomly selected image:",t);const a=new Image;a.src=t,a.onload=function(){n.style.setProperty("--background-image",`url(${t})`),n.classList.remove("fade-in"),n.offsetWidth,n.classList.add("fade-in"),console.log("Background image applied successfully:",t)},a.onerror=function(){console.error("Failed to load image:",t)}}textarea.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSubmit())})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){document.querySelector(".content-wrapper").innerHTML=originalContent,document.getElementById("text-input").value="",initializePromptLinks()}})),textarea.addEventListener("input",(function(){this.style.height="auto",this.style.height=`${this.scrollHeight}px`})),initializePromptLinks(),document.addEventListener("DOMContentLoaded",setRandomBackground);